"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{3008:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6264:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6142:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2682:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},4322:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},2741:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1961:function(e,t,n){n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},286:function(e,t,n){var r=n(4670),s=n(7437),a=n(2265),i=n(4322),o=n(1961),c=n(2682),l=n(3008),d=n(6141),u=n(6142),g=n(6264),m=n(2741);t.Z=function(e){e.orderId;var t=e.trackingData,n=e.mode,h=e.height,p=void 0===h?"400px":h,f=e.showControls,x=e.showRoute,w=void 0===x||x,v=e.onLocationUpdate,y=e.onDirectionsClick,b=e.riderInfo,k=(0,a.useRef)(null),j=(0,a.useRef)(null),N=(0,a.useRef)(null),Z=(0,a.useRef)(null),L=(0,a.useRef)(null),C=(0,a.useRef)(null),M=(0,a.useRef)(null),_=(0,r._)((0,a.useState)(!0),2),z=_[0],S=_[1],A=(0,r._)((0,a.useState)(null),2),D=A[0],R=A[1],I=(0,r._)((0,a.useState)(null),2),P=(I[0],I[1]),T=(0,r._)((0,a.useState)(!1),2),q=T[0],E=T[1],F=(0,a.useCallback)(function(){if(window.google&&window.google.maps){B();return}if(!document.querySelector('script[src*="maps.googleapis.com"]')){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDIHawXZZfiYMhBUznsnbXS0LOId9u5FLA","&libraries=geometry,places"),e.async=!0,e.defer=!0,e.onload=B,e.onerror=function(){return R("Failed to load Google Maps")},document.head.appendChild(e)}},[]),B=(0,a.useCallback)(function(){if(!k.current||!window.google){R("Map container not available");return}try{j.current=new window.google.maps.Map(k.current,{zoom:14,center:{lat:28.6139,lng:77.209},mapTypeControl:!1,streetViewControl:!1,fullscreenControl:"admin"===n,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),L.current=new window.google.maps.DirectionsService,C.current=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#10B981",strokeWeight:4,strokeOpacity:.8}}),C.current.setMap(j.current),S(!1),"rider"===n&&V(),t&&H(t)}catch(e){R("Failed to initialize map"),S(!1)}},[n,t]),V=(0,a.useCallback)(function(){navigator.geolocation&&(E(!0),M.current=navigator.geolocation.watchPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};P(t),v&&v(t),N.current?N.current.setPosition(t):O(t),j.current&&j.current.setCenter(t)},function(e){E(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4}))},[v]);(0,a.useCallback)(function(){M.current&&(navigator.geolocation.clearWatch(M.current),M.current=null),E(!1)},[]);var O=(0,a.useCallback)(function(e){if(j.current&&window.google&&(N.current&&N.current.setMap(null),N.current=new window.google.maps.Marker({position:e,map:j.current,title:"Delivery Partner",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="16" cy="16" r="14" fill="#10B981" stroke="#ffffff" stroke-width="3"/>\n            <path d="M10 16L14 20L22 12" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        '),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)},animation:window.google.maps.Animation.DROP}),b&&"rider"!==n)){var t=new window.google.maps.InfoWindow({content:'\n          <div class="p-3 min-w-[200px]">\n            <div class="flex items-center gap-3 mb-2">\n              <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">\n                <svg width="20" height="20" fill="currentColor" class="text-green-600">\n                  <path d="M8 16l2.879-2.879a3 3 0 114.242 4.242L8 24l-7.121-7.121a3 3 0 114.242-4.242L8 16z"/>\n                </svg>\n              </div>\n              <div>\n                <h4 class="font-semibold text-gray-900">'.concat(b.name,'</h4>\n                <p class="text-sm text-gray-600">').concat(b.vehicle,'</p>\n              </div>\n            </div>\n            <div class="flex items-center justify-between">\n              <div class="flex items-center gap-1">\n                <span class="text-yellow-400">‚≠ê</span>\n                <span class="text-sm font-medium">').concat(b.rating,"</span>\n              </div>\n              <button onclick=\"window.open('tel:").concat(b.phone,'\')" \n                class="bg-green-600 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-1">\n                <svg width="14" height="14" fill="currentColor">\n                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>\n                </svg>\n                Call\n              </button>\n            </div>\n          </div>\n        ')});N.current.addListener("click",function(){t.open(j.current,N.current)})}},[b,n]),U=(0,a.useCallback)(function(e){j.current&&window.google&&(Z.current&&Z.current.setMap(null),Z.current=new window.google.maps.Marker({position:e,map:j.current,title:"Delivery Address",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="16" cy="16" r="14" fill="#EF4444" stroke="#ffffff" stroke-width="3"/>\n            <path d="M16 8v8l4 4" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        '),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)}}))},[]),W=(0,a.useCallback)(function(e,t){L.current&&C.current&&L.current.route({origin:e,destination:t,travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!0},function(e,t){"OK"===t&&C.current.setDirections(e)})},[]),H=(0,a.useCallback)(function(e){if(j.current&&(e.riderLocation&&O(e.riderLocation),e.customerLocation&&U(e.customerLocation),e.riderLocation&&e.customerLocation&&w&&W(e.riderLocation,e.customerLocation),e.riderLocation||e.customerLocation)){var t=new window.google.maps.LatLngBounds;e.riderLocation&&t.extend(e.riderLocation),e.customerLocation&&t.extend(e.customerLocation),j.current.fitBounds(t),window.google.maps.event.addListenerOnce(j.current,"bounds_changed",function(){j.current.getZoom()>16&&j.current.setZoom(16)})}},[w,O,U,W]);return((0,a.useEffect)(function(){return F(),function(){M.current&&navigator.geolocation.clearWatch(M.current)}},[F]),(0,a.useEffect)(function(){t&&j.current&&H(t)},[t,H]),D)?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",style:{height:p},children:[(0,s.jsx)("div",{className:"text-red-600 mb-2",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 mx-auto"})}),(0,s.jsx)("p",{className:"text-red-700 font-medium",children:"Map Error"}),(0,s.jsx)("p",{className:"text-red-600 text-sm mt-1",children:D})]}):(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{ref:k,className:"w-full rounded-lg border border-gray-200",style:{height:p}}),z&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(g.Z,{className:"w-8 h-8 animate-spin text-green-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading map..."})]})}),(void 0===f||f)&&t&&(0,s.jsx)("div",{className:"absolute top-4 left-4 right-4 bg-white rounded-lg shadow-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full ".concat(function(e){switch(e){case"assigned":return"text-blue-600 bg-blue-100";case"picked_up":return"text-orange-600 bg-orange-100";case"out_for_delivery":return"text-green-600 bg-green-100";case"delivered":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}}(t.status)),children:function(e){switch(e){case"assigned":return(0,s.jsx)(i.Z,{className:"w-4 h-4"});case"picked_up":return(0,s.jsx)(o.Z,{className:"w-4 h-4"});case"out_for_delivery":return(0,s.jsx)(c.Z,{className:"w-4 h-4"});case"delivered":return(0,s.jsx)(l.Z,{className:"w-4 h-4"});default:return(0,s.jsx)(d.Z,{className:"w-4 h-4"})}}(t.status)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 capitalize",children:t.status.replace("_"," ")}),t.estimatedArrival&&(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["ETA: ",new Date(t.estimatedArrival).toLocaleTimeString()]})]})]}),"rider"===n&&y&&(0,s.jsxs)("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700 transition-colors",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Directions"]})]})}),"rider"===n&&(0,s.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,s.jsx)("div",{className:"px-3 py-2 rounded-lg shadow-lg ".concat(q?"bg-green-600 text-white":"bg-yellow-600 text-white"),children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Live Tracking"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"GPS Disabled"})]})})})}),"customer"===n&&t&&b&&(0,s.jsx)("div",{className:"absolute bottom-4 left-4 right-4 bg-white rounded-lg shadow-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:b.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:b.vehicle}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,s.jsx)("span",{className:"text-yellow-400",children:"‚≠ê"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:b.rating})]})]})]}),(0,s.jsx)("button",{onClick:function(){return window.open("tel:".concat(b.phone))},className:"bg-green-600 text-white p-3 rounded-full hover:bg-green-700 transition-colors",children:(0,s.jsx)(m.Z,{className:"w-5 h-5"})})]})})]})}}}]);