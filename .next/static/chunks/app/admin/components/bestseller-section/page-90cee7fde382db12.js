(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6803],{2156:function(e,t,s){Promise.resolve().then(s.bind(s,5591))},5591:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(6687),n=s(6840),a=s(5029),i=s(8965),l=s(4670),c=s(1801),o=s(44),d=s(7437),u=s(2265),g=s(5251),m=s(6834),x=s(4499);function h(){var e,t,s=(0,l._)((0,u.useState)({minRating:4,minReviews:5,maxProductsPerCategory:6,showCategoryIcons:!0,showRatings:!0,showReviewCount:!0,showBadges:!0,autoUpdate:!0,updateInterval:60,sortBy:"rating",excludeCategories:[],featuredOnly:!1,showEmptyCategories:!1}),2),h=s[0],f=s[1],y=(0,l._)((0,u.useState)([]),2),p=y[0],b=y[1],j=(0,l._)((0,u.useState)([]),2),v=j[0],w=j[1],N=(0,l._)((0,u.useState)(!0),2),C=N[0],k=N[1],R=(0,l._)((0,u.useState)(!1),2),S=R[0],P=R[1],_=(0,l._)((0,u.useState)([]),2),B=_[0],E=_[1],I=(0,l._)((0,u.useState)({qualifyingProducts:0,categoriesWithBestsellers:0,averageRating:0,lastUpdated:""}),2),U=I[0],q=I[1];(0,u.useEffect)(function(){O(),A()},[]),(0,u.useEffect)(function(){J()},[h,p,v]);var O=(e=(0,r._)(function(){var e,t,s;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,Promise.all([(0,x.getProducts)(),(0,x.getCategories)()])];case 1:return t=(e=l._.apply(void 0,[r.sent(),2]))[0],s=e[1],b(t),w(s),z(t),[3,4];case 2:return r.sent(),[3,4];case 3:return k(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),z=function(e){var t=e.filter(function(e){return(e.rating||0)>=h.minRating&&(e.reviews||0)>=h.minReviews}),s=new Set(t.map(function(e){return e.category})).size,r=t.length>0?t.reduce(function(e,t){return e+(t.rating||0)},0)/t.length:0;q({qualifyingProducts:t.length,categoriesWithBestsellers:s,averageRating:Number(r.toFixed(1)),lastUpdated:new Date().toLocaleString()})},J=function(){p.length&&v.length&&E(v.filter(function(e){return!h.excludeCategories.includes(e.id||e.name)}).map(function(e){var t=p.filter(function(t){return t.category===e.name&&(t.rating||0)>=h.minRating&&(t.reviews||0)>=h.minReviews}),s=(0,c._)(t);switch(h.sortBy){case"rating":s.sort(function(e,t){return(t.rating||0)-(e.rating||0)});break;case"reviews":s.sort(function(e,t){return(t.reviews||0)-(e.reviews||0)});break;case"sales":s.sort(function(e,t){return(t.sales||0)-(e.sales||0)})}return{category:e.name,products:s.slice(0,h.maxProductsPerCategory),totalQualifying:t.length}}).filter(function(e){return h.showEmptyCategories||e.products.length>0}))},A=function(){var e=localStorage.getItem("bestsellerSectionConfig");if(e){var t=JSON.parse(e);f(function(e){return(0,a._)({},e,t)})}},D=(t=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:P(!0),e.label=1;case 1:return e.trys.push([1,3,4,5]),localStorage.setItem("bestsellerSectionConfig",JSON.stringify(h)),[4,new Promise(function(e){return setTimeout(e,1e3)})];case 2:return e.sent(),alert("Configuration saved successfully!"),[3,5];case 3:return e.sent(),alert("Failed to save configuration"),[3,5];case 4:return P(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)}),M=function(e,t){f((0,i._)((0,a._)({},h),(0,n._)({},e,t))),z(p)},Q=function(e){h.excludeCategories.includes(e)?M("excludeCategories",h.excludeCategories.filter(function(t){return t!==e})):M("excludeCategories",(0,c._)(h.excludeCategories).concat([e]))};return C?(0,d.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("a",{href:"/admin/components",className:"flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:(0,d.jsx)(m.Ao2,{size:20})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-1",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)(m.nae,{className:"text-yellow-600",size:20})}),(0,d.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Bestseller Section"})]}),(0,d.jsx)("p",{className:"text-gray-600",children:"Configure bestselling products display"})]})]}),(0,d.jsxs)("div",{className:"flex space-x-3",children:[(0,d.jsxs)("button",{onClick:O,className:"flex items-center justify-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors",children:[(0,d.jsx)(m.Bw1,{size:20}),(0,d.jsx)("span",{children:"Refresh"})]}),(0,d.jsxs)("button",{onClick:D,disabled:S,className:"flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[(0,d.jsx)(m.mW3,{size:20}),(0,d.jsx)("span",{children:S?"Saving...":"Save Config"})]})]})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Qualifying Products",value:U.qualifyingProducts,icon:m.nae,color:"bg-yellow-500"},{label:"Categories",value:U.categoriesWithBestsellers,icon:m.aCJ,color:"bg-blue-500"},{label:"Average Rating",value:U.averageRating,icon:m.QqI,color:"bg-green-500"},{label:"Preview Items",value:B.reduce(function(e,t){return e+t.products.length},0),icon:m.rDJ,color:"bg-purple-500"}].map(function(e,t){return(0,d.jsx)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.label}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value})]}),(0,d.jsx)("div",{className:"w-12 h-12 rounded-lg ".concat(e.color," flex items-center justify-center"),children:(0,d.jsx)(e.icon,{className:"text-white",size:24})})]})},e.label)})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,d.jsxs)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Bestseller Criteria"}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Minimum Rating (",h.minRating," stars)"]}),(0,d.jsx)("input",{type:"range",min:"3.0",max:"5.0",step:"0.1",value:h.minRating,onChange:function(e){return M("minRating",Number(e.target.value))},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,d.jsx)("span",{children:"3.0"}),(0,d.jsx)("span",{children:"5.0"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Minimum Reviews (",h.minReviews,")"]}),(0,d.jsx)("input",{type:"range",min:"1",max:"50",value:h.minReviews,onChange:function(e){return M("minReviews",Number(e.target.value))},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,d.jsx)("span",{children:"1"}),(0,d.jsx)("span",{children:"50"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Products per Category (",h.maxProductsPerCategory,")"]}),(0,d.jsx)("input",{type:"range",min:"2",max:"12",value:h.maxProductsPerCategory,onChange:function(e){return M("maxProductsPerCategory",Number(e.target.value))},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,d.jsx)("span",{children:"2"}),(0,d.jsx)("span",{children:"12"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Products By"}),(0,d.jsxs)("select",{value:h.sortBy,onChange:function(e){return M("sortBy",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[(0,d.jsx)("option",{value:"rating",children:"Highest Rating"}),(0,d.jsx)("option",{value:"reviews",children:"Most Reviews"}),(0,d.jsx)("option",{value:"sales",children:"Best Sales"})]})]})]})]}),(0,d.jsxs)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Display Settings"}),(0,d.jsxs)("div",{className:"space-y-6",children:[[{key:"showCategoryIcons",label:"Category Icons",desc:"Show icons for each category"},{key:"showRatings",label:"Product Ratings",desc:"Display star ratings"},{key:"showReviewCount",label:"Review Count",desc:"Show number of reviews"},{key:"showBadges",label:"Product Badges",desc:"Show bestseller badges"},{key:"featuredOnly",label:"Featured Only",desc:"Show only featured products"},{key:"showEmptyCategories",label:"Empty Categories",desc:"Show categories with no qualifying products"}].map(function(e){return(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:e.label}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:e.desc})]}),(0,d.jsx)("button",{onClick:function(){return M(e.key,!h[e.key])},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ".concat(h[e.key]?"bg-green-600":"bg-gray-200"),children:(0,d.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out ".concat(h[e.key]?"translate-x-5":"translate-x-0")})})]},e.key)}),(0,d.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:"Auto Update"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Automatically refresh bestsellers"})]}),(0,d.jsx)("button",{onClick:function(){return M("autoUpdate",!h.autoUpdate)},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ".concat(h.autoUpdate?"bg-green-600":"bg-gray-200"),children:(0,d.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out ".concat(h.autoUpdate?"translate-x-5":"translate-x-0")})})]}),h.autoUpdate&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Interval (minutes)"}),(0,d.jsx)("input",{type:"number",min:"5",max:"1440",value:h.updateInterval,onChange:function(e){return M("updateInterval",Number(e.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]})]})]})]})]}),(0,d.jsxs)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Category Management"}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(function(e){var t=e.id||e.name,s=h.excludeCategories.includes(t),r=p.filter(function(t){return t.category===e.name&&(t.rating||0)>=h.minRating&&(t.reviews||0)>=h.minReviews}).length;return(0,d.jsxs)("div",{className:"p-4 rounded-lg border ".concat(s?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,d.jsx)("button",{onClick:function(){return Q(t)},className:"px-2 py-1 text-xs font-medium rounded-full ".concat(s?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:s?"Excluded":"Included"})]}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:[r," qualifying products"]})]},t)})})]}),(0,d.jsxs)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Preview"}),(0,d.jsxs)("div",{className:"space-y-6",children:[B.slice(0,3).map(function(e){return(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900",children:e.category}),(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[e.products.length," of ",e.totalQualifying," shown"]})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.products.slice(0,3).map(function(e,t){return(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,d.jsx)("h4",{className:"font-medium text-sm text-gray-900 mb-1",children:e.name}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[h.showRatings&&(0,d.jsxs)("span",{children:["★ ",e.rating||0]}),h.showReviewCount&&(0,d.jsxs)("span",{children:["(",e.reviews||0,")"]})]}),(0,d.jsxs)("p",{className:"text-sm font-semibold text-green-600 mt-1",children:["₹",e.price]})]},t)})})]},e.category)}),0===B.length&&(0,d.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,d.jsx)(m.nae,{className:"mx-auto h-12 w-12 text-gray-300 mb-2"}),(0,d.jsx)("p",{children:"No products match the current criteria"}),(0,d.jsx)("p",{className:"text-sm",children:"Try adjusting the minimum rating or review requirements"})]})]})]})]})}}},function(e){e.O(0,[4358,9990,4220,5643,6834,4499,2971,4938,1744],function(){return e(e.s=2156)}),_N_E=e.O()}]);