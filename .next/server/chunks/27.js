"use strict";exports.id=27,exports.ids=[27],exports.modules={37027:(e,t,r)=>{r.d(t,{Z:()=>x});var s=r(95344),n=r(3729),l=r(91917),a=r(16278),i=r(27860),o=r(7060),c=r(25545),d=r(80508),u=r(42739),m=r(40626),g=r(4377);let x=({orderId:e,trackingData:t,mode:r,height:x="400px",showControls:h=!0,showRoute:p=!0,onLocationUpdate:w,onDirectionsClick:f,riderInfo:v})=>{let b=(0,n.useRef)(null),j=(0,n.useRef)(null),y=(0,n.useRef)(null),N=(0,n.useRef)(null),k=(0,n.useRef)(null),L=(0,n.useRef)(null),C=(0,n.useRef)(null),[Z,M]=(0,n.useState)(!0),[D,R]=(0,n.useState)(null),[S,T]=(0,n.useState)(null),[z,A]=(0,n.useState)(!1),_=(0,n.useCallback)(()=>{if(!b.current||!window.google){R("Map container not available");return}try{j.current=new window.google.maps.Map(b.current,{zoom:14,center:{lat:28.6139,lng:77.209},mapTypeControl:!1,streetViewControl:!1,fullscreenControl:"admin"===r,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),k.current=new window.google.maps.DirectionsService,L.current=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#10B981",strokeWeight:4,strokeOpacity:.8}}),L.current.setMap(j.current),M(!1),"rider"===r&&E(),t&&O(t)}catch(e){R("Failed to initialize map"),M(!1)}},[r,t]),B=(0,n.useCallback)(()=>{new g.aN({apiKey:"AIzaSyDIHawXZZfiYMhBUznsnbXS0LOId9u5FLA",version:"weekly",libraries:["geometry","places"]}).load().then(()=>{_()}).catch(()=>R("Failed to load Google Maps"))},[_]),E=(0,n.useCallback)(()=>{navigator.geolocation&&(A(!0),C.current=navigator.geolocation.watchPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};T(t),w&&w(t),y.current?y.current.setPosition(t):$(t),j.current&&j.current.setCenter(t)},e=>{A(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4}))},[w]);(0,n.useCallback)(()=>{C.current&&(navigator.geolocation.clearWatch(C.current),C.current=null),A(!1)},[]);let $=(0,n.useCallback)(e=>{if(!j.current||!window.google)return;y.current&&(y.current.map=null);let{AdvancedMarkerElement:t}=window.google.maps.marker;if(y.current=new t({map:j.current,position:e,title:"Delivery Partner",content:(()=>{let e=document.createElement("div");return e.innerHTML='<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="14" fill="#10B981" stroke="#ffffff" stroke-width="3"/><path d="M10 16L14 20L22 12" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',e})()}),v&&"rider"!==r){let e=new window.google.maps.InfoWindow({content:`
          <div class="p-3 min-w-[200px]">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                <svg width="20" height="20" fill="currentColor" class="text-green-600">
                  <path d="M8 16l2.879-2.879a3 3 0 114.242 4.242L8 24l-7.121-7.121a3 3 0 114.242-4.242L8 16z"/>
                </svg>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900">${v.name}</h4>
                <p class="text-sm text-gray-600">${v.vehicle}</p>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-1">
                <span class="text-yellow-400">⭐</span>
                <span class="text-sm font-medium">${v.rating}</span>
              </div>
              <button onclick="window.open('tel:${v.phone}')" 
                class="bg-green-600 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-1">
                <svg width="14" height="14" fill="currentColor">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                </svg>
                Call
              </button>
            </div>
          </div>
        `});y.current.addListener("click",()=>{e.open(j.current,y.current)})}},[v,r]),F=(0,n.useCallback)(e=>{if(!j.current||!window.google)return;N.current&&(N.current.map=null);let{AdvancedMarkerElement:t}=window.google.maps.marker;N.current=new t({map:j.current,position:e,title:"Delivery Address",content:(()=>{let e=document.createElement("div");return e.innerHTML='<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="14" fill="#EF4444" stroke="#ffffff" stroke-width="3"/><path d="M16 8v8l4 4" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',e})()})},[]),I=(0,n.useCallback)((e,t)=>{k.current&&L.current&&k.current.route({origin:e,destination:t,travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!0},(e,t)=>{"OK"===t&&L.current.setDirections(e)})},[]),O=(0,n.useCallback)(e=>{if(j.current&&(e.riderLocation&&$(e.riderLocation),e.customerLocation&&F(e.customerLocation),e.riderLocation&&e.customerLocation&&p&&I(e.riderLocation,e.customerLocation),e.riderLocation||e.customerLocation)){let t=new window.google.maps.LatLngBounds;e.riderLocation&&t.extend(e.riderLocation),e.customerLocation&&t.extend(e.customerLocation),j.current.fitBounds(t),window.google.maps.event.addListenerOnce(j.current,"bounds_changed",()=>{j.current.getZoom()>16&&j.current.setZoom(16)})}},[p,$,F,I]);return((0,n.useEffect)(()=>(B(),()=>{C.current&&navigator.geolocation.clearWatch(C.current)}),[B]),(0,n.useEffect)(()=>{t&&j.current&&O(t)},[t,O]),D)?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",style:{height:x},children:[s.jsx("div",{className:"text-red-600 mb-2",children:s.jsx(d.Z,{className:"w-8 h-8 mx-auto"})}),s.jsx("p",{className:"text-red-700 font-medium",children:"Map Error"}),s.jsx("p",{className:"text-red-600 text-sm mt-1",children:D})]}):(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{ref:b,className:"w-full rounded-lg border border-gray-200",style:{height:x}}),Z&&s.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(u.Z,{className:"w-8 h-8 animate-spin text-green-600 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),h&&t&&s.jsx("div",{className:"absolute top-4 left-4 right-4 bg-white rounded-lg shadow-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${(e=>{switch(e){case"assigned":return"text-blue-600 bg-blue-100";case"picked_up":return"text-orange-600 bg-orange-100";case"out_for_delivery":return"text-green-600 bg-green-100";case"delivered":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}})(t.status)}`,children:(e=>{switch(e){case"assigned":return s.jsx(l.Z,{className:"w-4 h-4"});case"picked_up":return s.jsx(a.Z,{className:"w-4 h-4"});case"out_for_delivery":return s.jsx(i.Z,{className:"w-4 h-4"});case"delivered":return s.jsx(o.Z,{className:"w-4 h-4"});default:return s.jsx(c.Z,{className:"w-4 h-4"})}})(t.status)}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:t.status.replace("_"," ")}),t.estimatedArrival&&(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["ETA: ",new Date(t.estimatedArrival).toLocaleTimeString()]})]})]}),"rider"===r&&f&&(0,s.jsxs)("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700 transition-colors",children:[s.jsx(i.Z,{className:"w-4 h-4"}),"Directions"]})]})}),"rider"===r&&s.jsx("div",{className:"absolute bottom-4 left-4",children:s.jsx("div",{className:`px-3 py-2 rounded-lg shadow-lg ${z?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:s.jsx("div",{className:"flex items-center gap-2",children:z?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium",children:"Live Tracking"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Z,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"GPS Disabled"})]})})})}),"customer"===r&&t&&v&&s.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-white rounded-lg shadow-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(a.Z,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:v.name}),s.jsx("p",{className:"text-sm text-gray-600",children:v.vehicle}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"text-yellow-400",children:"⭐"}),s.jsx("span",{className:"text-sm font-medium",children:v.rating})]})]})]}),s.jsx("button",{onClick:()=>window.open(`tel:${v.phone}`),className:"bg-green-600 text-white p-3 rounded-full hover:bg-green-700 transition-colors",children:s.jsx(m.Z,{className:"w-5 h-5"})})]})})]})}}};