(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{2898:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let n=(0,r.forwardRef)(({color:n="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:o="",children:u,...d},m)=>(0,r.createElement)("svg",{ref:m,...s,width:i,height:i,stroke:n,strokeWidth:l?24*Number(c)/Number(i):c,className:["lucide",`lucide-${a(e)}`,o].join(" "),...d},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n}},3067:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2442:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2741:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9036:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(2898).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},4108:function(e,t,n){Promise.resolve().then(n.bind(n,4743))},4743:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(6687),s=n(4670),a=n(1801),i=n(44),c=n(7437),l=n(2265),o=n(5251),u=n(3067),d=n(2741),m=n(9036),x=n(2442),h=n(1396),f=n.n(h),g=n(4033),p=n(4499);function y(){var e,t,n=(0,g.useRouter)(),h=(0,s._)((0,l.useState)(""),2),y=h[0],b=h[1],j=(0,s._)((0,l.useState)(["","","","","",""]),2),v=j[0],N=j[1],w=(0,s._)((0,l.useState)("phone"),2),k=w[0],S=w[1],P=(0,s._)((0,l.useState)(!1),2),C=P[0],E=P[1],_=(0,s._)((0,l.useState)(""),2),Z=_[0],O=_[1],D=(0,s._)((0,l.useState)(null),2),T=D[0],L=D[1],A=(0,s._)((0,l.useState)(30),2),M=A[0],R=A[1],B=(0,s._)((0,l.useState)(!1),2),I=(B[0],B[1]),W=(0,l.useRef)([]);(0,l.useEffect)(function(){var e;return"otp"===k&&M>0&&(e=setInterval(function(){R(function(e){return e<=1?(I(!0),0):e-1})},1e3)),function(){return clearInterval(e)}},[k,M]);var $=(e=(0,r._)(function(){var e,t,n,r;return(0,i.Jh)(this,function(s){switch(s.label){case 0:if(!/^[6-9]\d{9}$/.test(y))return O("Please enter a valid 10-digit mobile number"),[2];E(!0),O(""),s.label=1;case 1:return s.trys.push([1,3,4,5]),e="+91".concat(y),t=(0,p.setupRecaptcha)("recaptcha-container"),[4,(0,p.sendOTP)(e,t)];case 2:return L(s.sent()),S("otp"),R(30),I(!1),[3,5];case 3:return n=s.sent(),r="Failed to send OTP. Please try again.","auth/billing-not-enabled"===n.code?r="SMS service not enabled. Please contact support.":"auth/too-many-requests"===n.code?r="Too many attempts. Please try again later.":"auth/invalid-phone-number"===n.code&&(r="Invalid phone number format."),O(r),[3,5];case 4:return E(!1),[7];case 5:return[2]}})}),function(){return e.apply(this,arguments)}),z=function(e,t){if(!(t.length>1)){var n,r=(0,a._)(v);r[e]=t,N(r),t&&e<5&&(null===(n=W.current[e+1])||void 0===n||n.focus()),r.every(function(e){return""!==e})&&J(r.join(""))}},F=function(e,t){if("Backspace"===t.key&&!v[e]&&e>0){var n;null===(n=W.current[e-1])||void 0===n||n.focus()}},J=(t=(0,r._)(function(e){var t,r,s;return(0,i.Jh)(this,function(a){switch(a.label){case 0:if(!T)return[2];E(!0),O(""),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,T.confirm(e)];case 2:return a.sent(),t="+91".concat(y),[4,(0,p.getCustomerByPhone)(t)];case 3:return(r=a.sent())?(localStorage.setItem("currentCustomer",JSON.stringify(r)),n.push("/")):n.push("/auth/signup?phone=".concat(encodeURIComponent(t),"&verified=true")),[3,6];case 4:return a.sent(),O("Invalid OTP. Please try again."),N(["","","","","",""]),null===(s=W.current[0])||void 0===s||s.focus(),[3,6];case 5:return E(!1),[7];case 6:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,c.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:(0,c.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[(0,c.jsxs)("div",{className:"text-center mb-8",children:[(0,c.jsxs)(f(),{href:"/",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 mb-4",children:[(0,c.jsx)(u.Z,{className:"w-4 h-4"}),"Back to Home"]}),(0,c.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,c.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-white font-bold text-2xl",children:"\uD83C\uDF31"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Sign in to your Bagicha account"})]})]})]}),(0,c.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[(0,c.jsxs)("div",{className:"text-center mb-6",children:[(0,c.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:"phone"===k?(0,c.jsx)(d.Z,{className:"text-green-500 text-2xl"}):(0,c.jsx)(m.Z,{className:"text-green-500 text-2xl"})}),(0,c.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"phone"===k?"Enter your mobile number":"Verify OTP"}),(0,c.jsx)("p",{className:"text-gray-600 text-sm",children:"phone"===k?"We'll send you a verification code via SMS":"We've sent a 6-digit code to +91 ".concat(y)})]}),"phone"===k&&(0,c.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)("div",{className:"flex items-center px-3 py-3 bg-gray-50 border border-r-0 border-gray-300 rounded-l-lg",children:(0,c.jsx)("span",{className:"text-gray-600 font-medium",children:"\uD83C\uDDEE\uD83C\uDDF3 +91"})}),(0,c.jsx)("input",{type:"tel",value:y,onChange:function(e){b(e.target.value.replace(/\D/g,"").slice(0,10)),O("")},placeholder:"Enter 10-digit number",className:"flex-1 px-4 py-3 border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",maxLength:10})]})]}),Z&&(0,c.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-500 text-sm",children:Z}),(0,c.jsx)("button",{onClick:$,disabled:C||10!==y.length,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-3 rounded-xl transition-all duration-300 transform hover:scale-105 active:scale-95 disabled:scale-100",children:C?(0,c.jsxs)("div",{className:"flex items-center justify-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Sending OTP..."]}):"Send OTP"}),(0,c.jsx)("div",{id:"recaptcha-container",className:"flex justify-center"})]}),"otp"===k&&(0,c.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,c.jsx)("div",{className:"flex justify-center space-x-2",children:v.map(function(e,t){return(0,c.jsx)("input",{ref:function(e){W.current[t]=e},type:"text",value:e,onChange:function(e){return z(t,e.target.value)},onKeyDown:function(e){return F(t,e)},className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",maxLength:1},t)})}),Z&&(0,c.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-500 text-sm text-center",children:Z}),C&&(0,c.jsxs)("div",{className:"flex items-center justify-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500 mr-2"}),(0,c.jsx)("span",{className:"text-gray-600",children:"Verifying..."})]}),(0,c.jsx)("div",{className:"text-center",children:M>0?(0,c.jsxs)("p",{className:"text-gray-500 text-sm",children:["Resend OTP in ",M,"s"]}):(0,c.jsx)("button",{onClick:function(){N(["","","","","",""]),R(30),I(!1),$()},disabled:C,className:"text-green-600 hover:text-green-700 font-medium text-sm",children:"Resend OTP"})}),(0,c.jsx)("button",{onClick:function(){return S("phone")},className:"w-full text-gray-600 hover:text-gray-700 font-medium text-sm",children:"Change phone number"})]}),(0,c.jsx)("div",{className:"mt-6 text-center",children:(0,c.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,c.jsx)(f(),{href:"/auth/signup",className:"text-green-600 hover:text-green-700 font-medium",children:"Sign up here"})]})})]}),(0,c.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[(0,c.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,c.jsx)(x.Z,{className:"w-4 h-4 text-green-600"})}),(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Secure Login"}),(0,c.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"OTP-based secure authentication"})]}),(0,c.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,c.jsx)(d.Z,{className:"w-4 h-4 text-green-600"})}),(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Quick Access"}),(0,c.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Login with just your phone number"})]}),(0,c.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,c.jsx)(m.Z,{className:"w-4 h-4 text-green-600"})}),(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Privacy Protected"}),(0,c.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Your data is safe and encrypted"})]})]})]})})}},1396:function(e,t,n){e.exports=n(5250)},4033:function(e,t,n){e.exports=n(5313)}},function(e){e.O(0,[4358,9990,4220,5643,5250,4499,2971,4938,1744],function(){return e(e.s=4108)}),_N_E=e.O()}]);