"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6774],{6774:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(6687),s=r(4670),a=r(44),i=r(7437),l=r(2265),o=r(5251),c=r(2167),u=r(6834),d=r(4499);function f(e){var t,r=e.value,f=e.onChange,m=e.onError,p=e.folder,h=void 0===p?"images":p,g=e.maxWidth,x=void 0===g?800:g,v=e.quality,y=void 0===v?.8:v,b=e.className,j=e.placeholder,N=e.showPreview,E=void 0===N||N,w=e.compress,k=void 0===w||w,C=(0,s._)((0,l.useState)(!1),2),R=C[0],P=C[1],I=(0,s._)((0,l.useState)(!1),2),L=I[0],z=I[1],M=(0,s._)((0,l.useState)(0),2),_=M[0],D=M[1],A=(0,l.useRef)(null),S=(0,l.useCallback)((t=(0,n._)(function(e){var t,r,n,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!(t=(0,d.validateImageFile)(e)).isValid)return null==m||m(t.error||"Invalid file"),[2];P(!0),D(0),a.label=1;case 1:if(a.trys.push([1,5,,6]),r=e,!k)return[3,3];return D(25),[4,(0,d.compressImage)(e,x,y)];case 2:r=a.sent(),a.label=3;case 3:return D(50),[4,(0,d.uploadImage)(r,h)];case 4:return n=a.sent(),D(100),f(n),setTimeout(function(){D(0),P(!1)},500),[3,6];case 5:return s=a.sent(),null==m||m(s instanceof Error?s.message:"Upload failed"),P(!1),D(0),[3,6];case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),[f,m,h,x,y,k]),F=(0,l.useCallback)(function(e){e.preventDefault(),z(!1);var t=Array.from(e.dataTransfer.files);t.length>0&&t[0].type.startsWith("image/")&&S(t[0])},[S]),O=(0,l.useCallback)(function(e){e.preventDefault(),z(!0)},[]),U=(0,l.useCallback)(function(e){e.preventDefault(),z(!1)},[]),W=function(){var e;null===(e=A.current)||void 0===e||e.click()},$=function(){f(""),A.current&&(A.current.value="")};return(0,i.jsxs)("div",{className:"relative ".concat(void 0===b?"":b),children:[(0,i.jsx)("input",{ref:A,type:"file",accept:"image/*",onChange:function(e){var t,r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&S(r)},className:"hidden"}),(0,i.jsxs)(o.E.div,{className:"\n          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-200\n          ".concat(L?"border-green-500 bg-green-50":r?"border-gray-200 bg-gray-50":"border-gray-300 hover:border-green-400 hover:bg-green-50","\n          ").concat(R?"pointer-events-none":"","\n        "),onClick:r?void 0:W,onDrop:F,onDragOver:O,onDragLeave:U,whileHover:r?{}:{scale:1.02},whileTap:r?{}:{scale:.98},children:[r&&E&&(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("img",{src:r,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),(0,i.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2",children:[(0,i.jsx)("button",{onClick:function(e){e.stopPropagation(),W()},className:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors",title:"Change Image",children:(0,i.jsx)(u.Yjd,{size:16})}),(0,i.jsx)("button",{onClick:function(e){e.stopPropagation(),$()},className:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors",title:"Remove Image",children:(0,i.jsx)(u.q5L,{size:16})})]})]}),!r&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"\n                w-16 h-16 rounded-full flex items-center justify-center\n                ".concat(L?"bg-green-100":"bg-gray-100","\n              "),children:(0,i.jsx)(u.LFN,{className:"w-8 h-8 ".concat(L?"text-green-600":"text-gray-400")})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-700 font-medium",children:void 0===j?"Click or drag to upload image":j}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Supports JPEG, PNG, WebP, GIF (max 5MB)"})]})]}),(0,i.jsx)(c.M,{children:R&&(0,i.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white bg-opacity-90 rounded-lg flex flex-col items-center justify-center space-y-3",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-gray-200 rounded-full"}),(0,i.jsx)(o.E.div,{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-gray-700 font-medium",children:"Uploading..."}),(0,i.jsx)("div",{className:"w-32 h-2 bg-gray-200 rounded-full mt-2 overflow-hidden",children:(0,i.jsx)(o.E.div,{className:"h-full bg-green-500 rounded-full",initial:{width:0},animate:{width:"".concat(_,"%")},transition:{duration:.3}})}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[_,"%"]})]})]})})]}),r&&!E&&(0,i.jsxs)("div",{className:"mt-3 flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(u.UgA,{className:"w-4 h-4 text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Image uploaded"}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Ready to save"})]})]}),(0,i.jsx)("button",{onClick:$,className:"text-red-500 hover:text-red-700 p-1",title:"Remove Image",children:(0,i.jsx)(u.q5L,{size:16})})]})]})}},2167:function(e,t,r){r.d(t,{M:function(){return g}});var n=r(2265),s=r(538);function a(){let e=(0,n.useRef)(!1);return(0,s.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var i=r(2363),l=r(8243),o=r(961);class c extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:t}){let r=(0,n.useId)(),s=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)(()=>{let{width:e,height:n,top:i,left:l}=a.current;if(t||!s.current||!e||!n)return;s.current.dataset.motionPopId=r;let o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            top: ${i}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[t]),n.createElement(c,{isPresent:t,childRef:s,sizeRef:a},n.cloneElement(e,{ref:s}))}let d=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:c})=>{let d=(0,o.h)(f),m=(0,n.useId)(),p=(0,n.useMemo)(()=>({id:m,initial:t,isPresent:r,custom:a,onExitComplete:e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;s&&s()},register:e=>(d.set(e,!1),()=>d.delete(e))}),i?void 0:[r]);return(0,n.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[r]),n.useEffect(()=>{r||d.size||!s||s()},[r]),"popLayout"===c&&(e=n.createElement(u,{isPresent:r},e)),n.createElement(l.O.Provider,{value:p},e)};function f(){return new Map}var m=r(781),p=r(6567);let h=e=>e.key||"",g=({children:e,custom:t,initial:r=!0,onExitComplete:l,exitBeforeEnter:o,presenceAffectsLayout:c=!0,mode:u="sync"})=>{var f;(0,p.k)(!o,"Replace exitBeforeEnter with mode='wait'");let g=(0,n.useContext)(m.p).forceRender||function(){let e=a(),[t,r]=(0,n.useState)(0),s=(0,n.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,n.useCallback)(()=>i.Wi.postRender(s),[s]),t]}()[0],x=a(),v=function(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}(e),y=v,b=(0,n.useRef)(new Map).current,j=(0,n.useRef)(y),N=(0,n.useRef)(new Map).current,E=(0,n.useRef)(!0);if((0,s.L)(()=>{E.current=!1,function(e,t){e.forEach(e=>{let r=h(e);t.set(r,e)})}(v,N),j.current=y}),f=()=>{E.current=!0,N.clear(),b.clear()},(0,n.useEffect)(()=>()=>f(),[]),E.current)return n.createElement(n.Fragment,null,y.map(e=>n.createElement(d,{key:h(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:u},e)));y=[...y];let w=j.current.map(h),k=v.map(h),C=w.length;for(let e=0;e<C;e++){let t=w[e];-1!==k.indexOf(t)||b.has(t)||b.set(t,void 0)}return"wait"===u&&b.size&&(y=[]),b.forEach((e,r)=>{if(-1!==k.indexOf(r))return;let s=N.get(r);if(!s)return;let a=w.indexOf(r),i=e;i||(i=n.createElement(d,{key:h(s),isPresent:!1,onExitComplete:()=>{b.delete(r);let e=Array.from(N.keys()).filter(e=>!k.includes(e));if(e.forEach(e=>N.delete(e)),j.current=v.filter(t=>{let n=h(t);return n===r||e.includes(n)}),!b.size){if(!1===x.current)return;g(),l&&l()}},custom:t,presenceAffectsLayout:c,mode:u},s),b.set(r,i)),y.splice(a,0,i)}),y=y.map(e=>{let t=e.key;return b.has(t)?e:n.createElement(d,{key:h(e),isPresent:!0,presenceAffectsLayout:c,mode:u},e)}),n.createElement(n.Fragment,null,b.size?y:y.map(e=>(0,n.cloneElement)(e)))}}}]);