(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7998],{3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2176:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},4280:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2245:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},6392:function(e,t,s){Promise.resolve().then(s.bind(s,9695))},9695:function(e,t,s){"use strict";s.r(t);var r=s(6687),a=s(4670),n=s(44),i=s(7437),l=s(2265),c=s(4033),d=s(6141),o=s(4322),m=s(1961),u=s(3008),x=s(3067),h=s(4280),f=s(2245),p=s(2741),g=s(2176),y=s(6142),v=s(286),j=s(4499),b=s(5853);t.default=function(){var e,t,s,N,w,k=(0,c.useParams)(),_=(0,c.useRouter)(),T=k.orderId,Z=(0,a._)((0,l.useState)(null),2),O=Z[0],S=Z[1],C=(0,a._)((0,l.useState)(null),2),D=C[0],E=C[1],I=(0,a._)((0,l.useState)(null),2),L=I[0],P=I[1],R=(0,a._)((0,l.useState)(!0),2),z=R[0],A=R[1],Y=(0,a._)((0,l.useState)(""),2),M=Y[0],F=Y[1],H=(0,a._)((0,l.useState)(!1),2),q=H[0],J=H[1],U=(0,b.useToast)().showToast,$=l.useRef(null);(0,l.useEffect)(function(){if(T){B();var e=(0,j.subscribeToOrderTracking)(T,function(e){e&&(E(e),e.riderId&&!L&&G(e.riderId))});return function(){return e()}}},[T]),(0,l.useEffect)(function(){D&&D.status&&($.current&&$.current!==D.status&&U("Order status updated: ".concat(D.status.replace("_"," ")),"info"),$.current=D.status)},[null==D?void 0:D.status]);var B=(e=(0,r._)(function(){var e;return(0,n.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),A(!0),[4,(0,j.getOrder)(T)];case 1:if(!(e=t.sent()))return F("Order not found"),A(!1),[2];if(S(e),!e.riderId)return[3,3];return[4,G(e.riderId)];case 2:t.sent(),t.label=3;case 3:return A(!1),[3,5];case 4:return t.sent(),F("Failed to load order details"),A(!1),[3,5];case 5:return[2]}})}),function(){return e.apply(this,arguments)}),G=(t=(0,r._)(function(e){var t;return(0,n.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,j.getRiders)()];case 1:return(t=s.sent().find(function(t){return t.id===e}))&&P({id:t.id,name:t.name,phone:t.phone,vehicleType:t.vehicleType,vehicleNumber:t.vehicleNumber,rating:t.rating}),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)}),Q=(s=(0,r._)(function(){return(0,n.Jh)(this,function(e){switch(e.label){case 0:return J(!0),[4,B()];case 1:return e.sent(),J(!1),[2]}})}),function(){return s.apply(this,arguments)});if(z)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Loading order details..."})]})});if(M)return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(o.Z,{className:"w-8 h-8 text-red-600"})}),(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order Not Found"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:M}),(0,i.jsx)("button",{onClick:function(){return _.push("/")},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"Go Home"})]})});if(!O)return null;var W=function(e){switch(e){case"pending":return{color:"text-yellow-600 bg-yellow-100",icon:(0,i.jsx)(d.Z,{className:"w-5 h-5"}),title:"Order Confirmed",description:"Your order is being prepared"};case"assigned":return{color:"text-blue-600 bg-blue-100",icon:(0,i.jsx)(o.Z,{className:"w-5 h-5"}),title:"Rider Assigned",description:"A delivery partner has been assigned"};case"picked_up":return{color:"text-orange-600 bg-orange-100",icon:(0,i.jsx)(o.Z,{className:"w-5 h-5"}),title:"Order Picked Up",description:"Your order has been picked up"};case"out_for_delivery":return{color:"text-green-600 bg-green-100",icon:(0,i.jsx)(m.Z,{className:"w-5 h-5"}),title:"Out for Delivery",description:"Your order is on the way"};case"delivered":return{color:"text-purple-600 bg-purple-100",icon:(0,i.jsx)(u.Z,{className:"w-5 h-5"}),title:"Delivered",description:"Your order has been delivered successfully"};default:return{color:"text-gray-600 bg-gray-100",icon:(0,i.jsx)(d.Z,{className:"w-5 h-5"}),title:"Processing",description:"Your order is being processed"}}}(O.status);return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,i.jsx)("div",{className:"max-w-md mx-auto px-4 py-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:function(){return _.back()},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",children:(0,i.jsx)(x.Z,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h1",{className:"font-semibold text-gray-900",children:"Track Order"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["#",O.orderNumber||O.id]})]}),(0,i.jsx)("button",{onClick:Q,disabled:q,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg disabled:opacity-50",children:(0,i.jsx)(h.Z,{className:"w-5 h-5 ".concat(q?"animate-spin":"")})})]})})}),(0,i.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)("div",{className:"p-2 rounded-full ".concat(W.color),children:W.icon}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h2",{className:"font-semibold text-gray-900",children:W.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:W.description})]})]}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:(0,i.jsx)("p",{children:(null==O?void 0:O.actualDeliveryTime)?"Delivered at ".concat(new Date(O.actualDeliveryTime).toLocaleTimeString()):(null==D?void 0:D.estimatedArrival)?"Estimated arrival: ".concat(new Date(D.estimatedArrival).toLocaleTimeString()):(null==O?void 0:O.estimatedDeliveryTime)?"Estimated delivery: ".concat(new Date(O.estimatedDeliveryTime).toLocaleTimeString()):"Calculating delivery time..."})})]}),D&&L&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,i.jsx)("div",{className:"p-4 border-b",children:(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Live Tracking"})}),(0,i.jsx)(v.Z,{orderId:T,trackingData:D,mode:"customer",height:"300px",riderInfo:{name:L.name,phone:L.phone,vehicle:"".concat(L.vehicleType," - ").concat(L.vehicleNumber),rating:L.rating}})]}),L&&"pending"!==O.status&&(0,i.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Your Delivery Partner"}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(m.Z,{className:"w-6 h-6 text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:L.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[L.vehicleType," - ",L.vehicleNumber]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,i.jsx)(f.Z,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:L.rating})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:function(){return window.open("tel:".concat(L.phone))},className:"p-3 bg-green-100 text-green-600 rounded-full hover:bg-green-200",children:(0,i.jsx)(p.Z,{className:"w-5 h-5"})}),(0,i.jsx)("button",{onClick:function(){return window.open("sms:".concat(L.phone))},className:"p-3 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200",children:(0,i.jsx)(g.Z,{className:"w-5 h-5"})})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,i.jsx)("div",{className:"p-4 border-b",children:(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Order Items"})}),(0,i.jsxs)("div",{className:"p-4 space-y-3",children:[O.items.map(function(e,t){var s=e.quantity||e.qty||1;return(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[e.image?(0,i.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 rounded-lg object-cover"}):(0,i.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(o.Z,{className:"w-6 h-6 text-gray-400"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Qty: ",s]})]})]}),(0,i.jsxs)("p",{className:"font-medium text-gray-900",children:["₹",e.price*s]})]},t)}),(0,i.jsxs)("div",{className:"border-t pt-3 flex justify-between font-semibold text-gray-900",children:[(0,i.jsx)("span",{children:"Total Amount"}),(0,i.jsxs)("span",{children:["₹",O.totalAmount||O.total||0]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Delivery Address"}),(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)(y.Z,{className:"w-5 h-5 text-gray-400 mt-1"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-900",children:(null===(N=O.address)||void 0===N?void 0:N.street)||"Address not available"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:(null===(w=O.address)||void 0===w?void 0:w.city)||""})]})]})]}),D&&D.trackingEvents.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,i.jsx)("div",{className:"p-4 border-b",children:(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:"Order Timeline"})}),(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)("div",{className:"space-y-4",children:D.trackingEvents.map(function(e,t){return(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.event.replace("_"," ")}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.note}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},t)})})})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Need Help?"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-gray-900",children:"Contact Customer Support"}),(0,i.jsx)(p.Z,{className:"w-4 h-4 text-gray-400"})]})}),(0,i.jsx)("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-gray-900",children:"Report an Issue"}),(0,i.jsx)(g.Z,{className:"w-4 h-4 text-gray-400"})]})})]})]})]})]})}},5853:function(e,t,s){"use strict";s.r(t),s.d(t,{ToastProvider:function(){return m},useToast:function(){return o}});var r=s(4670),a=s(1801),n=s(7437),i=s(9102),l=s.n(i),c=s(2265),d=(0,c.createContext)({showToast:function(){}}),o=function(){return(0,c.useContext)(d)},m=function(e){var t=e.children,s=(0,r._)((0,c.useState)([]),2),i=s[0],o=s[1];return(0,n.jsxs)(d.Provider,{value:{showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=Date.now();o(function(r){return(0,a._)(r).concat([{id:s,message:e,type:t}])}),setTimeout(function(){o(function(e){return e.filter(function(e){return e.id!==s})})},3500)}},children:[t,(0,n.jsx)("div",{className:"jsx-8325a2722a98286e fixed top-4 right-4 z-50 space-y-2",children:i.map(function(e){return(0,n.jsx)("div",{className:"jsx-8325a2722a98286e "+"px-4 py-3 rounded-lg shadow-lg text-white font-medium transition-all animate-fade-in-down\n              ".concat("success"===e.type?"bg-green-600":"error"===e.type?"bg-red-600":"bg-gray-800"),children:e.message},e.id)})}),(0,n.jsx)(l(),{id:"8325a2722a98286e",children:"@-webkit-keyframes fade-in-down{0%{opacity:0;-webkit-transform:translatey(-20px);transform:translatey(-20px)}100%{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fade-in-down{0%{opacity:0;-moz-transform:translatey(-20px);transform:translatey(-20px)}100%{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fade-in-down{0%{opacity:0;-o-transform:translatey(-20px);transform:translatey(-20px)}100%{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fade-in-down{0%{opacity:0;-webkit-transform:translatey(-20px);-moz-transform:translatey(-20px);-o-transform:translatey(-20px);transform:translatey(-20px)}100%{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.animate-fade-in-down{-webkit-animation:fade-in-down.4s ease;-moz-animation:fade-in-down.4s ease;-o-animation:fade-in-down.4s ease;animation:fade-in-down.4s ease}"})]})}},622:function(e,t,s){"use strict";var r=s(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var r,n={},d=null,o=null;for(r in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(o=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:d,ref:o,props:n,_owner:l.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[4358,9990,5643,6225,4499,286,2971,4938,1744],function(){return e(e.s=6392)}),_N_E=e.O()}]);