(()=>{var e={};e.id=801,e.ids=[801],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},2544:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=t(50482),a=t(69108),i=t(62563),l=t.n(i),n=t(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["rider",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,87882)),"C:\\Users\\User\\bagichaa\\app\\rider\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,94232)),"C:\\Users\\User\\bagichaa\\app\\rider\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,24717)),"C:\\Users\\User\\bagichaa\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,20429)),"C:\\Users\\User\\bagichaa\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,87984)),"C:\\Users\\User\\bagichaa\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1429)),"C:\\Users\\User\\bagichaa\\app\\not-found.tsx"]}],o=["C:\\Users\\User\\bagichaa\\app\\rider\\page.tsx"],u="/rider/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/rider/page",pathname:"/rider",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},52916:(e,s,t)=>{Promise.resolve().then(t.bind(t,10290))},10290:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var r=t(95344),a=t(3729),i=t(22254),l=t(18822),n=t(48120),d=t(91917),c=t(7060);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(69224).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);var u=t(76755),x=t(40626),m=t(27860),p=t(37027),g=t(87521),h=t(59202);let y=()=>{let e=(0,i.useRouter)(),[s,t]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),[f,v]=(0,a.useState)([]),[j,N]=(0,a.useState)(null),[w,k]=(0,a.useState)({totalDeliveries:0,completedToday:0,earnings:0,rating:5}),[_,q]=(0,a.useState)(!1),[P,C]=(0,a.useState)(null),[U,Z]=(0,a.useState)(!0),S=(0,a.useRef)(null),{showToast:O}=(0,h.useToast)(),A=(0,a.useRef)(null);(0,a.useEffect)(()=>{let s;if(!(0,g.WO)()){e.push("/rider/auth/login");return}let r=(0,g.fS)();return t(r),q(r?.status==="online"),r?.id?s=(0,g.qu)(r.id,e=>{let s=e.find(e=>["assigned","picked_up","out_for_delivery"].includes(e.status)),t=e.filter(e=>!["assigned","picked_up","out_for_delivery"].includes(e.status)).slice(0,10);b(s||null),v(t),s?(0,g.rI)(s.id,e=>{N(e)}):N(null),Z(!1)}):Z(!1),()=>{s&&s()}},[e]),(0,a.useEffect)(()=>(_&&s&&s.id?navigator.geolocation?(navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};(0,g.c5)(s.id,t)},e=>{alert("Location permission denied. Please enable location sharing to receive orders and update your location."),q(!1)},{enableHighAccuracy:!0}),S.current=setInterval(()=>{navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};(0,g.c5)(s.id,t)},e=>{alert("Location update failed. Please check your device settings."),q(!1)},{enableHighAccuracy:!0})},1e4)):(alert("Geolocation is not supported by your browser."),q(!1)):S.current&&(clearInterval(S.current),S.current=null),()=>{S.current&&(clearInterval(S.current),S.current=null)}),[_,s&&s.id]),(0,a.useEffect)(()=>{y&&y.status&&(A.current&&A.current!==y.status&&O(`Order status updated: ${y.status.replace("_"," ")}`,"info"),A.current=y.status)},[y?.status]);let M=async()=>{if(s&&s.id)try{let e=_?"offline":"online";await (0,g.qc)(s.id,e),q(!_);let r={...s,status:e};t(r),localStorage.setItem("currentRider",JSON.stringify(r))}catch(e){}},D=async e=>{if(C(e),s?.id)try{await (0,g.c5)(s.id,e)}catch(e){}},$=async e=>{if(y&&s?.id)try{let s={location:P,note:`Order ${e.replace("_"," ")} by rider`};"delivered"===e&&(s.deliveryProof={type:"photo",url:"placeholder-proof-url",timestamp:new Date}),await (0,g.Rw)(y.id,e,s)}catch(e){}},R=()=>{if(y?.address?.coordinates){let{lat:e,lng:s}=y.address.coordinates,t=`https://www.google.com/maps/dir/?api=1&destination=${e},${s}&travelmode=driving`;window.open(t,"_blank")}};return(y&&j?.riderLocation,U)?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(l.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"font-semibold text-gray-900",children:s?.name}),r.jsx("p",{className:"text-sm text-gray-600",children:s?.vehicle})]})]}),r.jsx("button",{onClick:()=>{localStorage.removeItem("currentRider"),e.push("/rider/auth/login")},className:"p-2 text-gray-400 hover:text-gray-600",children:r.jsx(n.Z,{className:"w-5 h-5"})})]})})}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[r.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${_?"bg-green-500":"bg-gray-400"}`}),r.jsx("span",{className:"font-medium text-gray-900",children:_?"You are Online":"You are Offline"})]}),r.jsx("button",{onClick:M,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${_?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:_?"Go Offline":"Go Online"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(d.Z,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Total Orders"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.totalDeliveries})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(c.Z,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Today"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.completedToday})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(o,{className:"w-5 h-5 text-purple-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Earnings"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",w.earnings]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(u.Z,{className:"w-5 h-5 text-yellow-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Rating"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.rating})]})]}),y?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Active Order"}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"assigned"===y.status?"bg-blue-100 text-blue-700":"picked_up"===y.status?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:y.status.replace("_"," ").toUpperCase()})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["#",y.orderNumber]})]}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:y.customerName||"Customer"}),r.jsx("p",{className:"text-sm text-gray-600",children:y.address?.street||"Address not available"}),r.jsx("p",{className:"text-sm text-gray-600",children:y.address?.city||""})]}),r.jsx("button",{onClick:()=>window.open(`tel:${y.customerPhone}`),className:"p-2 bg-green-100 text-green-600 rounded-full hover:bg-green-200",children:r.jsx(x.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Items (",y.items.length,")"]}),y.items.slice(0,3).map((e,s)=>{let t=e.quantity||e.qty||1;return(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:[t,"x ",e.name]}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",e.price*t]})]},s)}),y.items.length>3&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["+",y.items.length-3," more items"]}),(0,r.jsxs)("div",{className:"border-t pt-2 flex justify-between font-medium",children:[r.jsx("span",{children:"Total Amount"}),(0,r.jsxs)("span",{children:["₹",y.totalAmount||y.total||0]})]})]}),j&&(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Live Tracking"}),r.jsx(p.Z,{orderId:y.id,trackingData:j,mode:"rider",height:"200px",onLocationUpdate:D,onDirectionsClick:R})]}),(0,r.jsxs)("div",{className:"space-y-2",children:["assigned"===y.status&&r.jsx("button",{onClick:()=>$("picked_up"),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700",children:"Mark as Picked Up"}),"picked_up"===y.status&&r.jsx("button",{onClick:()=>$("out_for_delivery"),className:"w-full bg-orange-600 text-white py-3 rounded-lg font-medium hover:bg-orange-700",children:"Start Delivery"}),"out_for_delivery"===y.status&&r.jsx("button",{onClick:()=>$("delivered"),className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700",children:"Mark as Delivered"}),(0,r.jsxs)("button",{onClick:R,className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 flex items-center justify-center gap-2",children:[r.jsx(m.Z,{className:"w-5 h-5"}),"Open in Maps"]})]})]})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 text-center shadow-sm",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(d.Z,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"No Active Orders"}),r.jsx("p",{className:"text-gray-600 text-sm",children:_?"You'll receive new orders when available":"Go online to start receiving orders"})]}),f.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Orders"})}),r.jsx("div",{className:"divide-y",children:f.map(e=>(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:["#",e.orderNumber]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"delivered"===e.status?"bg-green-100 text-green-700":"cancelled"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:e.status.toUpperCase()})]}),r.jsx("p",{className:"text-sm text-gray-600",children:e.customerName}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["₹",e.totalAmount]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})]})]})}},48120:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},76755:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},18822:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},94232:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a,metadata:()=>r});let r={title:"Bagicha Rider - Delivery Partner Dashboard",description:"Bagicha delivery partner app for managing orders and tracking deliveries",viewport:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",themeColor:"#16a34a",manifest:"/manifest.json"};function a({children:e}){return e}},87882:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,t(86843).createProxy)(String.raw`C:\Users\User\bagichaa\app\rider\page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,867,275,592,872,521,27],()=>t(2544));module.exports=r})();