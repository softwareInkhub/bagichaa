(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9693],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:d="",children:o,...u},h)=>(0,n.createElement)("svg",{ref:h,...s,width:i,height:i,stroke:r,strokeWidth:l?24*Number(c)/Number(i):c,className:["lucide",`lucide-${a(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r}},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2741:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9036:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},1961:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},7972:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3567:function(e,t,r){Promise.resolve().then(r.bind(r,6040))},6040:function(e,t,r){"use strict";r.r(t);var n=r(6687),s=r(4670),a=r(44),i=r(7437),c=r(2265),l=r(4033),d=r(1961),o=r(2741),u=r(6264),h=r(9036),m=r(3067),f=r(7972),x=r(7007),g=r(4499);t.default=function(){var e,t,r,p=(0,l.useRouter)(),y=(0,s._)((0,c.useState)("phone"),2),b=y[0],v=y[1],w=(0,s._)((0,c.useState)(""),2),j=w[0],N=w[1],k=(0,s._)((0,c.useState)(""),2),_=k[0],P=k[1],O=(0,s._)((0,c.useState)(!1),2),Z=O[0],C=O[1],T=(0,s._)((0,c.useState)(""),2),E=T[0],S=T[1],R=(0,s._)((0,c.useState)(null),2),V=R[0],L=R[1],A=(0,s._)((0,c.useState)(0),2),F=A[0],I=A[1];(0,c.useEffect)(function(){(0,g.isRiderLoggedIn)()&&p.push("/rider")},[p]),(0,c.useEffect)(function(){var e=(0,x.v0)();if(!window.recaptchaVerifier)try{window.recaptchaVerifier=new x.lI(e,"recaptcha-container",{size:"invisible",callback:function(){}})}catch(e){}return function(){if(window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch(e){}window.recaptchaVerifier=null}}},[]);var M=(e=(0,n._)(function(){var e,t,r,n,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!j||10!==j.length)return S("Please enter a valid 10-digit phone number"),[2];C(!0),S(""),a.label=1;case 1:if(a.trys.push([1,3,4,5]),e=(0,x.v0)(),t="+91".concat(j),!(r=window.recaptchaVerifier))throw Error("reCAPTCHA verifier not initialized");return[4,(0,x.$g)(e,t,r)];case 2:return L(a.sent()),v("otp"),I(30),n=setInterval(function(){I(function(e){return e<=1?(clearInterval(n),0):e-1})},1e3),[3,5];case 3:if("auth/invalid-phone-number"===(s=a.sent()).code?S("Invalid phone number format"):"auth/too-many-requests"===s.code?S("Too many requests. Please try again later."):S("Failed to send OTP. Please try again."),window.recaptchaVerifier){try{window.recaptchaVerifier.clear()}catch(e){}window.recaptchaVerifier=null}return[3,5];case 4:return C(!1),[7];case 5:return[2]}})}),function(){return e.apply(this,arguments)}),q=(t=(0,n._)(function(){var e,t;return(0,a.Jh)(this,function(r){switch(r.label){case 0:if(!_||6!==_.length)return S("Please enter a valid 6-digit OTP"),[2];C(!0),S(""),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,g.authenticateRider)(j,_,V)];case 2:return e=r.sent(),(0,g.setCurrentRider)(e),p.push("/rider"),[3,5];case 3:return(t=r.sent()).message.includes("Rider not found")?S("No rider account found with this phone number. Please contact admin."):t.message.includes("deactivated")?S("Your rider account is deactivated. Please contact admin."):"auth/invalid-verification-code"===t.code?S("Invalid OTP. Please check and try again."):"auth/code-expired"===t.code?S("OTP has expired. Please request a new one."):S("Authentication failed. Please try again."),[3,5];case 4:return C(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)}),$=(r=(0,n._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:if(F>0)return[2];return P(""),S(""),[4,M()];case 1:return e.sent(),[2]}})}),function(){return r.apply(this,arguments)});return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center px-4",children:(0,i.jsxs)("div",{className:"max-w-md w-full",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(d.Z,{className:"w-10 h-10 text-white"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Bagicha Rider"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Sign in to start delivering"})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:"phone"===b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Enter Phone Number"}),(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"We'll send you an OTP to verify your account"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,i.jsx)(o.Z,{className:"h-5 w-5 text-gray-400"})}),(0,i.jsx)("div",{className:"absolute inset-y-0 left-12 flex items-center pointer-events-none",children:(0,i.jsx)("span",{className:"text-gray-500 text-sm",children:"+91"})}),(0,i.jsx)("input",{type:"tel",value:j,onChange:function(e){var t=e.target.value.replace(/\D/g,"");t.length<=10&&N(t)},placeholder:"98765 43210",className:"w-full pl-20 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",maxLength:10})]})]}),E&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,i.jsx)("p",{className:"text-red-700 text-sm",children:E})}),(0,i.jsx)("button",{onClick:M,disabled:Z||10!==j.length,className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{className:"w-5 h-5 animate-spin"}),"Sending OTP..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{className:"w-5 h-5"}),"Send OTP"]})})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("button",{onClick:function(){v("phone"),P(""),S(""),L(null)},className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4",children:[(0,i.jsx)(m.Z,{className:"w-4 h-4"}),"Back"]}),(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verify OTP"}),(0,i.jsxs)("p",{className:"text-gray-600 text-sm",children:["Enter the 6-digit code sent to +91 ",j]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OTP Code"}),(0,i.jsx)("input",{type:"number",value:_,onChange:function(e){var t=e.target.value;t.length<=6&&P(t)},placeholder:"123456",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-2xl tracking-widest",maxLength:6})]}),E&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,i.jsx)("p",{className:"text-red-700 text-sm",children:E})}),(0,i.jsx)("button",{onClick:q,disabled:Z||6!==_.length,className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{className:"w-5 h-5 animate-spin"}),"Verifying..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Z,{className:"w-5 h-5"}),"Verify & Login"]})}),(0,i.jsx)("div",{className:"text-center",children:F>0?(0,i.jsxs)("p",{className:"text-gray-500 text-sm",children:["Resend OTP in ",F,"s"]}):(0,i.jsx)("button",{onClick:$,className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Resend OTP"})})]})]})}),(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsxs)("p",{className:"text-gray-500 text-sm",children:["Don't have a rider account?"," ",(0,i.jsx)("span",{className:"text-green-600 font-medium",children:"Contact Admin"})]})}),(0,i.jsx)("div",{id:"recaptcha-container"})]})})}},622:function(e,t,r){"use strict";var n=r(2265),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var n,a={},d=null,o=null;for(n in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(o=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:d,ref:o,props:a,_owner:c.current}}t.Fragment=a,t.jsx=d,t.jsxs=d},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[4358,9990,5643,4499,2971,4938,1744],function(){return e(e.s=3567)}),_N_E=e.O()}]);