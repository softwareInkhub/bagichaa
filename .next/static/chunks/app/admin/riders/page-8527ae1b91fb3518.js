(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,...x},u)=>(0,r.createElement)("svg",{ref:u,...n,width:l,height:l,stroke:s,strokeWidth:c?24*Number(i)/Number(l):i,className:["lucide",`lucide-${a(e)}`,d].join(" "),...x},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s}},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2245:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5750:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7926:function(e,t,s){Promise.resolve().then(s.bind(s,2020))},2020:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(6687),n=s(4670),a=s(44),l=s(7437),i=s(2265),c=s(9883),d=s(5750),o=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var u=s(1961),h=s(4322),m=s(2245),g=s(1827),f=s(6142),p=s(2741);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,o.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var y=s(286),v=s(4499),N=function(){var e,t,s,o=(0,n._)((0,i.useState)([]),2),N=o[0],b=o[1],w=(0,n._)((0,i.useState)([]),2),k=w[0],_=w[1],R=(0,n._)((0,i.useState)(!0),2),C=R[0],S=R[1],A=(0,n._)((0,i.useState)(""),2),Z=A[0],O=A[1],L=(0,n._)((0,i.useState)("all"),2),D=L[0],E=L[1],T=(0,n._)((0,i.useState)(!1),2),M=(T[0],T[1]),I=(0,n._)((0,i.useState)(null),2),P=I[0],U=I[1],$=(0,n._)((0,i.useState)(!1),2),q=$[0],z=$[1],B=(0,n._)((0,i.useState)(!1),2),J=B[0],H=B[1],W=(0,n._)((0,i.useState)([]),2),F=W[0],V=W[1],X=(0,n._)((0,i.useState)({totalRiders:0,onlineRiders:0,busyRiders:0,totalDeliveries:0,avgRating:0}),2),Y=X[0],G=X[1];(0,i.useEffect)(function(){var e=(0,v.subscribeToRiders)(function(e){b(e),_(e),Q(e),S(!1)});return function(){return e()}},[]),(0,i.useEffect)(function(){K()},[]);var K=(e=(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,v.getOrders)()];case 1:return V(e.sent().filter(function(e){return"pending"===e.status})),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)}),Q=function(e){G({totalRiders:e.length,onlineRiders:e.filter(function(e){return"online"===e.status}).length,busyRiders:e.filter(function(e){return"busy"===e.status}).length,totalDeliveries:e.reduce(function(e,t){return e+t.totalDeliveries},0),avgRating:Math.round(10*(e.length>0?e.reduce(function(e,t){return e+t.rating},0)/e.length:0))/10})};(0,i.useEffect)(function(){var e=N;Z&&(e=e.filter(function(e){return e.name.toLowerCase().includes(Z.toLowerCase())||e.phone.includes(Z)||e.vehicleNumber.toLowerCase().includes(Z.toLowerCase())})),"all"!==D&&(e=e.filter(function(e){return e.status===D})),_(e)},[N,Z,D]),(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,v.createRider)(e)];case 1:return t.sent(),M(!1),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})});var ee=(t=(0,r._)(function(e,t){return(0,a.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,v.updateRiderStatus)(e,t)];case 1:case 2:return s.sent(),[3,3];case 3:return[2]}})}),function(e,s){return t.apply(this,arguments)}),et=(s=(0,r._)(function(e,t){return(0,a.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,v.assignRiderToOrder)(e,t)];case 1:return s.sent(),H(!1),U(null),K(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}})}),function(e,t){return s.apply(this,arguments)}),es=function(e){switch(e){case"online":return"bg-green-100 text-green-800";case"busy":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return C?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Delivery Partners"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage your delivery team and track performance"})]}),(0,l.jsxs)("button",{onClick:function(){return M(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5"}),"Add Rider"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Riders"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Y.totalRiders})]})]})}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,l.jsx)(x,{className:"w-6 h-6 text-green-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Online"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Y.onlineRiders})]})]})}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,l.jsx)(u.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Busy"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Y.busyRiders})]})]})}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,l.jsx)(h.Z,{className:"w-6 h-6 text-purple-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deliveries"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Y.totalDeliveries})]})]})}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,l.jsx)(m.Z,{className:"w-6 h-6 text-orange-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Avg Rating"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Y.avgRating})]})]})})]}),(0,l.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search riders...",value:Z,onChange:function(e){return O(e.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsxs)("select",{value:D,onChange:function(e){return E(e.target.value)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"online",children:"Online"}),(0,l.jsx)("option",{value:"busy",children:"Busy"}),(0,l.jsx)("option",{value:"offline",children:"Offline"})]})})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,l.jsxs)("div",{className:"overflow-x-auto",children:[(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Rider"}),(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Status"}),(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Vehicle"}),(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Deliveries"}),(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Rating"}),(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Earnings"}),(0,l.jsx)("th",{className:"text-left p-4 font-medium text-gray-900",children:"Last Active"}),(0,l.jsx)("th",{className:"text-right p-4 font-medium text-gray-900",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.map(function(e){return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(d.Z,{className:"w-5 h-5 text-green-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.phone})]})]})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(es(e.status)),children:e.status.toUpperCase()})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.vehicleType}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.vehicleNumber})]})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.completedDeliveries}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["of ",e.totalDeliveries]})]})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:e.rating})]})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["₹",e.totalEarnings]})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.lastActiveAt?new Date("object"==typeof e.lastActiveAt&&"toDate"in e.lastActiveAt?e.lastActiveAt.toDate():e.lastActiveAt).toLocaleDateString():"Never"})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[e.currentLocation&&(0,l.jsx)("button",{onClick:function(){U(e),z(!0)},className:"p-2 text-gray-400 hover:text-blue-600",title:"Track Location",children:(0,l.jsx)(f.Z,{className:"w-4 h-4"})}),"online"===e.status&&F.length>0&&(0,l.jsx)("button",{onClick:function(){U(e),H(!0)},className:"p-2 text-gray-400 hover:text-green-600",title:"Assign Order",children:(0,l.jsx)(h.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:function(){return window.open("tel:".concat(e.phone))},className:"p-2 text-gray-400 hover:text-green-600",title:"Call Rider",children:(0,l.jsx)(p.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:function(){var t="online"===e.status?"offline":"online";ee(e.id,t)},className:"p-2 hover:text-white rounded ".concat("online"===e.status?"text-gray-400 hover:bg-red-600":"text-gray-400 hover:bg-green-600"),title:"online"===e.status?"Set Offline":"Set Online",children:"online"===e.status?(0,l.jsx)(j,{className:"w-4 h-4"}):(0,l.jsx)(x,{className:"w-4 h-4"})})]})})]},e.id)})})]}),0===k.length&&(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)("p",{className:"text-gray-500",children:"No riders found"})})]})}),q&&P&&P.currentLocation&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Live Tracking - ",P.name]}),(0,l.jsx)("button",{onClick:function(){return z(!1)},className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(y.Z,{mode:"admin",height:"400px",trackingData:{orderId:P.currentOrderId||"",riderId:P.id,status:P.status,riderLocation:P.currentLocation,trackingEvents:[]},riderInfo:{name:P.name,phone:P.phone,vehicle:P.vehicleType,rating:P.rating}})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Current Status"}),(0,l.jsx)("p",{className:"font-medium",children:P.status.toUpperCase()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Vehicle"}),(0,l.jsxs)("p",{className:"font-medium",children:[P.vehicleType," - ",P.vehicleNumber]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Completed Deliveries"}),(0,l.jsx)("p",{className:"font-medium",children:P.completedDeliveries})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-600",children:"Rating"}),(0,l.jsxs)("p",{className:"font-medium",children:[P.rating," ⭐"]})]})]})]})})}),J&&P&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Assign Order to ",P.name]}),(0,l.jsx)("button",{onClick:function(){return H(!1)},className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,l.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:F.map(function(e){var t,s,r;return(0,l.jsxs)("div",{className:"border rounded-lg p-3 hover:bg-gray-50 cursor-pointer",onClick:function(){return et(e.id,P.id)},children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsxs)("span",{className:"font-medium",children:["#",e.orderNumber||e.id.slice(-8)]}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["₹",e.totalAmount||e.total||0]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.customerName||(null===(t=e.address)||void 0===t?void 0:t.fullName)||"N/A"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:(null===(s=e.address)||void 0===s?void 0:s.street)||(null===(r=e.address)||void 0===r?void 0:r.addressLine1)||"Address not available"})]},e.id)})}),0===F.length&&(0,l.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No pending orders available"})]})})})]})}},622:function(e,t,s){"use strict";var r=s(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var r,a={},d=null,o=null;for(r in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(o=t.ref),t)l.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:d,ref:o,props:a,_owner:i.current}}t.Fragment=a,t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[4358,9990,5643,4499,286,2971,4938,1744],function(){return e(e.s=7926)}),_N_E=e.O()}]);