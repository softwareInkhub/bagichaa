(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{6238:function(e,t,s){Promise.resolve().then(s.bind(s,9789))},9789:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(6687),a=s(4670),n=s(44),i=s(7437),l=s(2265),c=s(5251),d=s(6834),o=s(4499);function m(){var e,t=(0,a._)((0,l.useState)({totalProducts:0,totalOrders:0,totalRevenue:0,totalCustomers:0,pendingOrders:0,recentOrders:[],topProducts:[]}),2),s=t[0],m=t[1],x=(0,a._)((0,l.useState)(!0),2),u=x[0],h=x[1];(0,l.useEffect)(function(){g()},[]);var g=(e=(0,r._)(function(){var e,t,s,r,i,l,c,d,x,u,g;return(0,n.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,Promise.all([(0,o.getOrders)(),(0,o.getProducts)()])];case 1:return t=(e=a._.apply(void 0,[n.sent(),2]))[0],s=e[1],r=t,i=s,l=r.reduce(function(e,t){return e+(t.total||0)},0),c=new Set(r.map(function(e){return e.customerPhone})).size,d=r.filter(function(e){return"pending"===e.status}).length,x=r.sort(function(e,t){var s,r,a=(null===(s=e.createdAt)||void 0===s?void 0:s.toDate())||new Date(e.createdAt);return((null===(r=t.createdAt)||void 0===r?void 0:r.toDate())||new Date(t.createdAt)).getTime()-a.getTime()}).slice(0,5),u=new Map,r.forEach(function(e){var t;null===(t=e.items)||void 0===t||t.forEach(function(e){var t=u.get(e.name)||{quantity:0,revenue:0};u.set(e.name,{name:e.name,quantity:t.quantity+(e.qty||0),revenue:t.revenue+(e.price||0)*(e.qty||0)})})}),g=Array.from(u.values()).sort(function(e,t){return t.quantity-e.quantity}).slice(0,5),m({totalProducts:i.length,totalOrders:r.length,totalRevenue:l,totalCustomers:c,pendingOrders:d,recentOrders:x,topProducts:g}),[3,4];case 2:return n.sent(),[3,4];case 3:return h(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),y=function(e){if(!e)return"N/A";var t=e.toDate?e.toDate():new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return u?(0,i.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,i.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening with your store."})]}),(0,i.jsxs)("button",{onClick:g,className:"flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors w-full lg:w-auto",children:[(0,i.jsx)(d.Bw1,{size:20}),(0,i.jsx)("span",{children:"Refresh"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[{title:"Total Revenue",value:"₹".concat(s.totalRevenue.toLocaleString()),change:"+12%",changeType:"increase",icon:d.oQC,color:"bg-green-500"},{title:"Total Orders",value:s.totalOrders,change:"+8%",changeType:"increase",icon:d.Qyq,color:"bg-blue-500"},{title:"Products",value:s.totalProducts,change:"+3%",changeType:"increase",icon:d.zFh,color:"bg-purple-500"},{title:"Customers",value:s.totalCustomers,change:"+15%",changeType:"increase",icon:d.WY8,color:"bg-orange-500"}].map(function(e,t){return(0,i.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl p-4 md:p-6 shadow-sm border border-gray-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600 truncate",children:e.title}),(0,i.jsx)("p",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-1",children:e.value}),(0,i.jsxs)("div",{className:"flex items-center mt-2",children:["increase"===e.changeType?(0,i.jsx)(d.iRh,{className:"text-green-500 flex-shrink-0",size:16}):(0,i.jsx)(d.tv1,{className:"text-red-500 flex-shrink-0",size:16}),(0,i.jsx)("span",{className:"text-sm font-medium ml-1 ".concat("increase"===e.changeType?"text-green-600":"text-red-600"),children:e.change}),(0,i.jsx)("span",{className:"text-gray-500 text-sm ml-1 hidden sm:inline",children:"vs last month"})]})]}),(0,i.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg ".concat(e.color," flex items-center justify-center flex-shrink-0 ml-3"),children:(0,i.jsx)(e.icon,{className:"text-white",size:20})})]})},e.title)})}),s.pendingOrders>0&&(0,i.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 md:p-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center mr-0 sm:mr-3 flex-shrink-0",children:(0,i.jsx)(d.Qyq,{className:"text-yellow-600",size:16})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("h3",{className:"font-medium text-yellow-900",children:["You have ",s.pendingOrders," pending order",1!==s.pendingOrders?"s":""]}),(0,i.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"These orders are waiting to be processed. Check the orders page to update their status."})]})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),(0,i.jsxs)("a",{href:"/admin/orders",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center",children:["View all ",(0,i.jsx)(d.rDJ,{className:"ml-1",size:16})]})]}),(0,i.jsx)("div",{className:"space-y-4",children:s.recentOrders.map(function(e,t){var s;return(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(d.Qyq,{className:"text-green-600",size:14})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"font-medium text-gray-900",children:["#",e.id.slice(-8)]}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.customerPhone})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("p",{className:"font-semibold text-gray-900",children:["₹",null===(s=e.total)||void 0===s?void 0:s.toLocaleString()]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:y(e.createdAt)})]})]},e.id)})}),0===s.recentOrders.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,i.jsx)(d.Qyq,{className:"mx-auto h-8 w-8 text-gray-300 mb-2"}),(0,i.jsx)("p",{children:"No recent orders"})]})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Top Selling Products"}),(0,i.jsxs)("a",{href:"/admin/products",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center",children:["View all ",(0,i.jsx)(d.rDJ,{className:"ml-1",size:16})]})]}),(0,i.jsx)("div",{className:"space-y-4",children:s.topProducts.map(function(e,t){return(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,i.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["#",t+1]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[e.quantity," sold"]})]})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsxs)("p",{className:"font-semibold text-gray-900",children:["₹",e.revenue.toLocaleString()]})})]},e.name)})}),0===s.topProducts.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,i.jsx)(d.zFh,{className:"mx-auto h-8 w-8 text-gray-300 mb-2"}),(0,i.jsx)("p",{children:"No sales data yet"})]})]})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{title:"Add Product",href:"/admin/products",icon:d.zFh,color:"bg-green-500"},{title:"View Orders",href:"/admin/orders",icon:d.Qyq,color:"bg-blue-500"},{title:"Manage Categories",href:"/admin/categories",icon:d.QqI,color:"bg-purple-500"},{title:"View Customers",href:"/admin/customers",icon:d.WY8,color:"bg-orange-500"}].map(function(e,t){return(0,i.jsxs)("a",{href:e.href,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-sm transition-all group",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-lg ".concat(e.color," flex items-center justify-center mb-3 group-hover:scale-110 transition-transform"),children:(0,i.jsx)(e.icon,{className:"text-white",size:20})}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.title})]},e.title)})})]})]})}}},function(e){e.O(0,[4358,9990,4220,5643,6834,4499,2971,4938,1744],function(){return e(e.s=6238)}),_N_E=e.O()}]);